#7章 正規表現
JavaScriptの正規表現はPerlから取り入れられた。
正規表現:文法を表す__仕様__ ➡検索、置換、文字列からの情報取得に用いられる

JavaScriptの正規表現 = ベル研究所で作られたオリジナル文法 + Perlのいくつかの拡張

JavaScriptにおいて正規表現が利用出来るメソッドは以下

```js:解説は8章
ragexp.exec
ragexp.test
ragexp.match
ragexp.replace
ragexp.search
ragexp.split
```

_正規表現を使った方が同じ事を文字列操作で行うのに比べてずっと良いパフォーマンスを出す事が多い_
➡なんでもかんでも正規表現使えば良いってもんじゃない

正規表現は複雑
  同じ文字でも書かれる箇所によってオペレータだったりリテラルだったり
  コメントとか空白入れられない
  ⬇
  読みづらい
  書きづらい
  つらい

➡ルールを単純化してみた(筆者曰く)

セキュリティチェック等に利用している場合は要注意

##7-1 正規表現の例

###「?」「+」「*」について

```
1. ? 0 or 1回
2. + 1回以上
3. * 0回以上
```

```js:sample1.js
var parse_url = /^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;

var url = "http://ora.com:80/goodparts?q#fragment";

result:
url: http://ora.com:80/goodparts?q#fragment
scheme: http 
slash: // 
host: ora.com 
port: 80 
path: goodparts 
query: q 
hash: fragment 
```

最初だけ細かく見る（あとはコードで）




1. (?:([A-Za-z]+):)?
コード参照
?:を省略した場合、name[1]にはhttp:がキャプチャ対象になる

2.(\/{0,3})
省略

3.([0-9.\-A-Za-z]+)
省略

4.(?::(\d+))?
省略

5.(?:\/([^?#]*))?
省略

6.(?:\?([^#]*))?

7.(?:#(.*))?$

8.$

var parse_number = /^-?\d+(?:\.\d*)?(?:e[+\-]?\d+)?$/i;

1. /^  $/
最初から最後まででマッチングを行う事を保証

2. /  /i
➡大文字小文字の区別無し

##7-2 正規表現の構築
/で正規表現リテラルを表す紛らわしさ
コメント？割り算？正規表現？

正規表現のフラグ

```
g: 複数回マッチ
i: 大文字小文字区別しない
m:??? .が改行にマッチするようになるのでは？

```


```//何にマッチさせたいのかよく分かりませんでした(JavaScript文字列？？？)
普通の書き方：
var my_regexp = /"(?:\\.|[^\\\"])*"/g;

飛び道具的な書き方：(動的に正規表現を使いたい時)(脆弱性の匂い)
var my_regexp = new RegExp("\"(?:\\.|[^\\\\\\\"])*\"", 'g');

RegExpオブジェクトのプロパティ弄る事でフラグ付け替えられる
```

同じ正規表現リテラルで生成されたRegExpオブジェクトは単一のインスタンスを共有
(シングルトン的な?メモリ節約のため？)

##7-3 正規表現の構成要素

###7-3-1 選択肢
テストコードで説明
最初にマッチしたら終わり

###7-3-2 正規表現シーケンス
コードで説明
数量詞を何も指定しないと1回だけマッチする

###7-3-3 正規表現因子
特殊文字はエスケープする事でその文字にマッチさせる事が出来る
コードで説明

###7-3-4 エスケープ
コードで説明

####\wは使えない？？？
➡何故？少なくとも英単語や変数名取る上で十分だと感じる。
何か勘違いしている可能性あり、コードで説明

###7-3-5 正規表現グループ
キャプチャグループ:	括弧で囲まれた選択肢
非キャプチャグループ:	(?: )前に出てきたもの
肯定先読み、否定先読み:	悪いパーツ(コードで説明)

###7-3-6 正規表現クラス
文字の範囲を指定して書く事が出来る
コード参照

###7-3-7 正規表現クラスにおけるエスケープ
###7-3-8 数量詞

#環境
##ユニットテスト、UIテスト(とは言った物のUIのテストはしてません)
・YUI Test	2.9.0
・yeti		0.2.21

##コード解析
jshint		1.1.0

##markdown
・kobito

##エディタ
ちょっと成長したVim
Ruby界隈の勉強会とかの発表で良く見る感じの色
オートインデントとかjshint連携したりとかファイル開いたりとか非同期にShell実行したりとか大体プラグイン

